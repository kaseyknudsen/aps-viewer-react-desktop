{"ast":null,"code":"var _jsxFileName = \"/Users/kaseyknudsen/Desktop/APS/aps-viewer-react-desktop/aps-viewer-react/src/components/Viewer.jsx\",\n  _s = $RefreshSig$();\n/// import * as Autodesk from \"@types/forge-viewer\";\n\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Autodesk\n} = window;\nconst runtime = {\n  options: null,\n  ready: null\n};\nfunction initializeViewerRuntime(options) {\n  if (!runtime.ready) {\n    runtime.options = {\n      ...options\n    };\n    runtime.ready = new Promise(resolve => Autodesk.Viewing.Initializer(runtime.options, resolve));\n  } else {\n    if (['accessToken', 'getAccessToken', 'env', 'api', 'language'].some(prop => options[prop] !== runtime.options[prop])) {\n      return Promise.reject('Cannot initialize another viewer runtime with different settings.');\n    }\n  }\n  return runtime.ready;\n}\nconst Viewer = props => {\n  _s();\n  const containerRef = useRef(null);\n  const viewerRef = useRef(null);\n  useEffect(() => {\n    initializeViewerRuntime(props.runtime || {}).then(() => {\n      viewerRef.current = new Autodesk.Viewing.GuiViewer3D(containerRef.current);\n      viewerRef.current.start();\n      viewerRef.current.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, onViewerCameraChange);\n      viewerRef.current.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, onViewerSelectionChange);\n      updateViewerState({});\n    }).catch(err => console.error(err));\n    return () => {\n      if (viewerRef.current) {\n        viewerRef.current.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, onViewerCameraChange);\n        viewerRef.current.removeEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, onViewerSelectionChange);\n        viewerRef.current.finish();\n        viewerRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    updateViewerState({});\n  }, [props.urn, props.selectedIds]);\n  const updateViewerState = () => {\n    if (!viewerRef.current) return;\n    if (props.urn) {\n      Autodesk.Viewing.Document.load('urn:' + props.urn, doc => viewerRef.current.loadDocumentNode(doc, doc.getRoot().getDefaultGeometry()), (code, message, errors) => console.error(code, message, errors));\n    } else if (viewerRef.current.model) {\n      viewerRef.current.unloadModel(viewerRef.current.model);\n    }\n    const selectedIds = viewerRef.current.getSelection();\n    if (JSON.stringify(props.selectedIds || []) !== JSON.stringify(selectedIds)) {\n      viewerRef.current.select(props.selectedIds);\n    }\n  };\n  const onViewerCameraChange = () => {\n    if (props.onCameraChange) {\n      props.onCameraChange({\n        viewer: viewerRef.current,\n        camera: viewerRef.current.getCamera()\n      });\n    }\n  };\n  const onViewerSelectionChange = () => {\n    if (props.onSelectionChange) {\n      props.onSelectionChange({\n        viewer: viewerRef.current,\n        ids: viewerRef.current.getSelection()\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 10\n  }, this);\n};\n_s(Viewer, \"8bRVENUPbrusItqfqnI9ABExCfw=\");\n_c = Viewer;\nViewer.propTypes = {\n  runtime: PropTypes.object,\n  urn: PropTypes.string,\n  selectedIds: PropTypes.arrayOf(PropTypes.number),\n  onCameraChange: PropTypes.func,\n  onSelectionChange: PropTypes.func\n};\nexport default Viewer;\nvar _c;\n$RefreshReg$(_c, \"Viewer\");","map":{"version":3,"names":["React","useEffect","useRef","PropTypes","Autodesk","window","runtime","options","ready","initializeViewerRuntime","Promise","resolve","Viewing","Initializer","some","prop","reject","Viewer","props","containerRef","viewerRef","then","current","GuiViewer3D","start","addEventListener","CAMERA_CHANGE_EVENT","onViewerCameraChange","SELECTION_CHANGED_EVENT","onViewerSelectionChange","updateViewerState","catch","err","console","error","removeEventListener","finish","urn","selectedIds","Document","load","doc","loadDocumentNode","getRoot","getDefaultGeometry","code","message","errors","model","unloadModel","getSelection","JSON","stringify","select","onCameraChange","viewer","camera","getCamera","onSelectionChange","ids","propTypes","object","string","arrayOf","number","func"],"sources":["/Users/kaseyknudsen/Desktop/APS/aps-viewer-react-desktop/aps-viewer-react/src/components/Viewer.jsx"],"sourcesContent":["/// import * as Autodesk from \"@types/forge-viewer\";\n\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nconst { Autodesk } = window;\n\nconst runtime = {\n  options: null,\n  ready: null,\n};\n\nfunction initializeViewerRuntime(options) {\n  if (!runtime.ready) {\n    runtime.options = { ...options };\n    runtime.ready = new Promise((resolve) => Autodesk.Viewing.Initializer(runtime.options, resolve));\n  } else {\n    if (['accessToken', 'getAccessToken', 'env', 'api', 'language'].some((prop) => options[prop] !== runtime.options[prop])) {\n      return Promise.reject('Cannot initialize another viewer runtime with different settings.');\n    }\n  }\n  return runtime.ready;\n}\n\nconst Viewer = (props) => {\n  const containerRef = useRef(null);\n  const viewerRef = useRef(null);\n\n  useEffect(() => {\n    initializeViewerRuntime(props.runtime || {})\n      .then(() => {\n        viewerRef.current = new Autodesk.Viewing.GuiViewer3D(containerRef.current);\n        viewerRef.current.start();\n        viewerRef.current.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, onViewerCameraChange);\n        viewerRef.current.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, onViewerSelectionChange);\n        updateViewerState({});\n      })\n      .catch((err) => console.error(err));\n\n    return () => {\n      if (viewerRef.current) {\n        viewerRef.current.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, onViewerCameraChange);\n        viewerRef.current.removeEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, onViewerSelectionChange);\n        viewerRef.current.finish();\n        viewerRef.current = null;\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    updateViewerState({});\n  }, [props.urn, props.selectedIds]);\n\n  const updateViewerState = () => {\n    if (!viewerRef.current) return;\n\n    if (props.urn) {\n      Autodesk.Viewing.Document.load(\n        'urn:' + props.urn,\n        (doc) => viewerRef.current.loadDocumentNode(doc, doc.getRoot().getDefaultGeometry()),\n        (code, message, errors) => console.error(code, message, errors)\n      );\n    } else if (viewerRef.current.model) {\n      viewerRef.current.unloadModel(viewerRef.current.model);\n    }\n\n    const selectedIds = viewerRef.current.getSelection();\n    if (JSON.stringify(props.selectedIds || []) !== JSON.stringify(selectedIds)) {\n      viewerRef.current.select(props.selectedIds);\n    }\n  };\n\n  const onViewerCameraChange = () => {\n    if (props.onCameraChange) {\n      props.onCameraChange({ viewer: viewerRef.current, camera: viewerRef.current.getCamera() });\n    }\n  };\n\n  const onViewerSelectionChange = () => {\n    if (props.onSelectionChange) {\n      props.onSelectionChange({ viewer: viewerRef.current, ids: viewerRef.current.getSelection() });\n    }\n  };\n\n  return <div ref={containerRef}></div>;\n};\n\nViewer.propTypes = {\n  runtime: PropTypes.object,\n  urn: PropTypes.string,\n  selectedIds: PropTypes.arrayOf(PropTypes.number),\n  onCameraChange: PropTypes.func,\n  onSelectionChange: PropTypes.func,\n};\n\nexport default Viewer;\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}