{"ast":null,"code":"var _jsxFileName = \"/Users/kaseyknudsen/Desktop/APS/aps-viewer-react-desktop/aps-viewer-react/src/components/Viewer.jsx\";\n/// import * as Autodesk from \"@types/forge-viewer\";\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Autodesk\n} = window;\nconst runtime = {\n  /** @type {Autodesk.Viewing.InitializerOptions} */\n  options: null,\n  /** @type {Promise<void>} */\n  ready: null\n};\n\n/**\n * Initializes global runtime for communicating with Autodesk Platform Services.\n * Calling this function repeatedly with different options is not allowed, and will result in an exception.\n * @async\n * @param {Autodesk.Viewing.InitializerOptions} options Runtime initialization options.\n * @returns {Promise<void>}\n */\nfunction initializeViewerRuntime(options) {\n  if (!runtime.ready) {\n    runtime.options = {\n      ...options\n    };\n    runtime.ready = new Promise(resolve => Autodesk.Viewing.Initializer(runtime.options, resolve));\n  } else {\n    if (['accessToken', 'getAccessToken', 'env', 'api', 'language'].some(prop => options[prop] !== runtime.options[prop])) {\n      return Promise.reject('Cannot initialize another viewer runtime with different settings.');\n    }\n  }\n  return runtime.ready;\n}\n\n/**\n * Wrapper for the Autodesk Platform Services viewer component.\n */\nclass Viewer extends React.Component {\n  constructor(props) {\n    super(props);\n    /** @type {HTMLDivElement} */\n    this.onViewerCameraChange = () => {\n      if (this.props.onCameraChange) {\n        this.props.onCameraChange({\n          viewer: this.viewer,\n          camera: this.viewer.getCamera()\n        });\n      }\n    };\n    this.onViewerSelectionChange = () => {\n      if (this.props.onSelectionChange) {\n        this.props.onSelectionChange({\n          viewer: this.viewer,\n          ids: this.viewer.getSelection()\n        });\n      }\n    };\n    this.container = null;\n    /** @type {Autodesk.Viewing.GuiViewer3D} */\n    this.viewer = null;\n  }\n  componentDidMount() {\n    initializeViewerRuntime(this.props.runtime || {}).then(_ => {\n      this.viewer = new Autodesk.Viewing.GuiViewer3D(this.container);\n      this.viewer.start();\n      this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onViewerCameraChange);\n      this.viewer.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, this.onViewerSelectionChange);\n      this.updateViewerState({});\n    }).catch(err => console.error(err));\n  }\n  componentWillUnmount() {\n    if (this.viewer) {\n      this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onViewerCameraChange);\n      this.viewer.removeEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, this.onViewerSelectionChange);\n      this.viewer.finish();\n      this.viewer = null;\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.viewer) {\n      this.updateViewerState(prevProps);\n    }\n  }\n  updateViewerState(prevProps) {\n    if (this.props.urn && this.props.urn !== prevProps.urn) {\n      Autodesk.Viewing.Document.load('urn:' + this.props.urn, doc => this.viewer.loadDocumentNode(doc, doc.getRoot().getDefaultGeometry()), (code, message, errors) => console.error(code, message, errors));\n    } else if (!this.props.urn && this.viewer.model) {\n      this.viewer.unloadModel(this.viewer.model);\n    }\n    const selectedIds = this.viewer.getSelection();\n    if (JSON.stringify(this.props.selectedIds || []) !== JSON.stringify(selectedIds)) {\n      this.viewer.select(this.props.selectedIds);\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ref => this.container = ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 16\n    }, this);\n  }\n}\nViewer.propTypes = {\n  /** Viewer runtime initialization options. */\n  runtime: PropTypes.object,\n  /** URN of model to be loaded. */\n  urn: PropTypes.string,\n  /** List of selected object IDs. */\n  selectedIds: PropTypes.arrayOf(PropTypes.number),\n  /** Callback for when the viewer camera changes. */\n  onCameraChange: PropTypes.func,\n  /** Callback for when the viewer selectio changes. */\n  onSelectionChange: PropTypes.func\n};\nexport default Viewer;","map":{"version":3,"names":["React","PropTypes","Autodesk","window","runtime","options","ready","initializeViewerRuntime","Promise","resolve","Viewing","Initializer","some","prop","reject","Viewer","Component","constructor","props","onViewerCameraChange","onCameraChange","viewer","camera","getCamera","onViewerSelectionChange","onSelectionChange","ids","getSelection","container","componentDidMount","then","_","GuiViewer3D","start","addEventListener","CAMERA_CHANGE_EVENT","SELECTION_CHANGED_EVENT","updateViewerState","catch","err","console","error","componentWillUnmount","removeEventListener","finish","componentDidUpdate","prevProps","urn","Document","load","doc","loadDocumentNode","getRoot","getDefaultGeometry","code","message","errors","model","unloadModel","selectedIds","JSON","stringify","select","render","ref","propTypes","object","string","arrayOf","number","func"],"sources":["/Users/kaseyknudsen/Desktop/APS/aps-viewer-react-desktop/aps-viewer-react/src/components/Viewer.jsx"],"sourcesContent":["/// import * as Autodesk from \"@types/forge-viewer\";\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst { Autodesk } = window;\n\nconst runtime = {\n    /** @type {Autodesk.Viewing.InitializerOptions} */\n    options: null,\n    /** @type {Promise<void>} */\n    ready: null\n};\n\n/**\n * Initializes global runtime for communicating with Autodesk Platform Services.\n * Calling this function repeatedly with different options is not allowed, and will result in an exception.\n * @async\n * @param {Autodesk.Viewing.InitializerOptions} options Runtime initialization options.\n * @returns {Promise<void>}\n */\nfunction initializeViewerRuntime(options) {\n    if (!runtime.ready) {\n        runtime.options = { ...options };\n        runtime.ready = new Promise((resolve) => Autodesk.Viewing.Initializer(runtime.options, resolve));\n    } else {\n        if (['accessToken', 'getAccessToken', 'env', 'api', 'language'].some(prop => options[prop] !== runtime.options[prop])) {\n            return Promise.reject('Cannot initialize another viewer runtime with different settings.')\n        }\n    }\n    return runtime.ready;\n}\n\n/**\n * Wrapper for the Autodesk Platform Services viewer component.\n */\nclass Viewer extends React.Component {\n    constructor(props) {\n        super(props);\n        /** @type {HTMLDivElement} */\n        this.container = null;\n        /** @type {Autodesk.Viewing.GuiViewer3D} */\n        this.viewer = null;\n    }\n\n    componentDidMount() {\n        initializeViewerRuntime(this.props.runtime || {})\n            .then(_ => {\n                this.viewer = new Autodesk.Viewing.GuiViewer3D(this.container);\n                this.viewer.start();\n                this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onViewerCameraChange);\n                this.viewer.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, this.onViewerSelectionChange);\n                this.updateViewerState({});\n            })\n            .catch(err => console.error(err));\n    }\n\n    componentWillUnmount() {\n        if (this.viewer) {\n            this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onViewerCameraChange);\n            this.viewer.removeEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, this.onViewerSelectionChange);\n            this.viewer.finish();\n            this.viewer = null;\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.viewer) {\n            this.updateViewerState(prevProps);\n        }\n    }\n\n    updateViewerState(prevProps) {\n        if (this.props.urn && this.props.urn !== prevProps.urn) {\n            Autodesk.Viewing.Document.load(\n                'urn:' + this.props.urn,\n                (doc) => this.viewer.loadDocumentNode(doc, doc.getRoot().getDefaultGeometry()),\n                (code, message, errors) => console.error(code, message, errors)\n            );\n        } else if (!this.props.urn && this.viewer.model) {\n            this.viewer.unloadModel(this.viewer.model);\n        }\n\n        const selectedIds = this.viewer.getSelection();\n        if (JSON.stringify(this.props.selectedIds || []) !== JSON.stringify(selectedIds)) {\n            this.viewer.select(this.props.selectedIds);\n        }\n    }\n\n    onViewerCameraChange = () => {\n        if (this.props.onCameraChange) {\n            this.props.onCameraChange({ viewer: this.viewer, camera: this.viewer.getCamera() });\n        }\n    }\n\n    onViewerSelectionChange = () => {\n        if (this.props.onSelectionChange) {\n            this.props.onSelectionChange({ viewer: this.viewer, ids: this.viewer.getSelection() });\n        }\n    }\n\n    render() {\n        return <div ref={ref => this.container = ref}></div>;\n    }\n}\n\nViewer.propTypes = {\n    /** Viewer runtime initialization options. */\n    runtime: PropTypes.object,\n    /** URN of model to be loaded. */\n    urn: PropTypes.string,\n    /** List of selected object IDs. */\n    selectedIds: PropTypes.arrayOf(PropTypes.number),\n    /** Callback for when the viewer camera changes. */\n    onCameraChange: PropTypes.func,\n    /** Callback for when the viewer selectio changes. */\n    onSelectionChange: PropTypes.func\n};\n\nexport default Viewer;\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}